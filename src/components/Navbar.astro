---
const links = [
  { href: "/",          label: "Home"     },
  { href: "/projects/", label: "Projects" },
  { href: "/resume/",   label: "Resume"   },
  { href: "/contact/",  label: "Contact"  },
];
const current = Astro.url.pathname;
---

<nav class="navbar">
  <div class="nav-container">
    <a href="/" class="logo">Mathio&nbsp;Luca</a>

    <!-- Desktop links -->
    <ul class="links md:flex">
      {links.map((l) => (
        <li>
          <a
            href={l.href}
            class:list-active={current === l.href || current.startsWith(l.href)}
            class="nav-link"
          >
            {l.label}
          </a>
        </li>
      ))}
    </ul>

    <!-- Hamburger -->
    <button id="hamburger" class="hamburger md:hidden" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- Mobile dropdown -->
  <ul id="mobile-menu" class="mobile-menu">
    {links.map((l) => (
      <li>
        <a
          href={l.href}
          class:list-active={current === l.href || current.startsWith(l.href)}
          class="mobile-link"
        >
          {l.label}
        </a>
      </li>
    ))}
  </ul>

  <!---------------------------  STYLES  --------------------------->
  <style is:global>
    /* ====== Shell ====== */
    .navbar{
      position:sticky;top:0;z-index:50;
      background:rgba(var(--parch-rgb),.80);          /* var created below */
      backdrop-filter:blur(6px);
      border-bottom:1px solid rgba(222,207,181,.6);
      box-shadow:0 1px 2px rgba(0,0,0,.05);
    }
    .nav-container{@apply max-w-6xl mx-auto px-6 py-3 flex items-center justify-between;}

    /* ====== Logo ====== */
    .logo{font-family:"Playfair Display",serif;@apply text-xl md:text-2xl font-bold text-[var(--ink)];}

    /* ====== Desktop links ====== */
    .links{@apply hidden gap-8 items-center;}
    .nav-link{@apply relative text-sm font-medium text-[var(--ink)];}
    .nav-link::after{content:"";@apply absolute left-0 -bottom-0.5 h-0.5 w-0;
      background:linear-gradient(90deg,var(--gold),var(--ink));
      transition:width .35s;}
    .nav-link:hover::after{width:100%;}
    .list-active{color:var(--gold);}

    /* ====== Hamburger ====== */
    .hamburger{@apply flex flex-col justify-between w-6 h-5;}
    .hamburger span{@apply block h-[3px] w-full bg-[var(--ink)] rounded transition-transform;}
    .hamburger.open span:nth-child(1){@apply translate-y-[6px] rotate-45 bg-[var(--gold)];}
    .hamburger.open span:nth-child(2){@apply opacity-0;}
    .hamburger.open span:nth-child(3){@apply -translate-y-[6px] -rotate-45 bg-[var(--gold)];}

    /* ====== Mobile dropdown ====== */
    .mobile-menu{
      position:absolute;left:0;top:100%;width:100%;
      background:rgba(var(--parch-rgb),.95);
      transform-origin:top;
      transform:scaleY(0);
      transition:transform .25s ease-out;
      @apply md:hidden flex flex-col gap-4 px-6 pb-6 pt-3;
    }
    .mobile-menu.open{transform:scaleY(1);}
    .mobile-link{@apply text-[var(--ink)] font-medium;}
    .mobile-link.list-active{@apply text-[var(--gold)];}
  </style>

  <!---------------------------  SCRIPT  --------------------------->
  <script is:inline>
    const burger=document.getElementById('hamburger');
    const menu  =document.getElementById('mobile-menu');

    burger?.addEventListener('click',()=>{
      burger.classList.toggle('open');
      menu.classList.toggle('open');
    });
    menu?.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click',()=>{
        burger.classList.remove('open');
        menu.classList.remove('open');
      });
    });
  </script>
</nav>
