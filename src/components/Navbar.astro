---
/* Nav links shown in order */
const links = [
  { href: "/",          label: "Home"     },
  { href: "/projects/", label: "Projects" },
  { href: "/resume/",   label: "Resume"   },
  { href: "/contact/",  label: "Contact"  },
];

/* Detect active link */
const current = Astro.url.pathname;
---

<nav class="navbar">
  <div class="nav-container">
    <a href="/" class="logo">Mathio&nbsp;Luca</a>

    <!-- Desktop links -->
    <ul class="links md:flex">
      {links.map((l) => (
        <li>
          <a
            href={l.href}
            class:list-active={current === l.href || current.startsWith(l.href)}
            class="nav-link"
          >
            {l.label}
          </a>
        </li>
      ))}
    </ul>

    <!-- Hamburger (mobile only) -->
    <button id="hamburger" class="hamburger md:hidden" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- Mobile dropdown -->
  <ul id="mobile-menu" class="mobile-menu">
    {links.map((l) => (
      <li>
        <a
          href={l.href}
          class:list-active={current === l.href || current.startsWith(l.href)}
          class="mobile-link"
        >
          {l.label}
        </a>
      </li>
    ))}
  </ul>

  <!-- ——— STYLES ——— -->
  <style is:global>
    /* ------------------------------------------------------------
       Layout container
    ------------------------------------------------------------ */
    .navbar{
      /* custom colours done with plain CSS ↓ */
      background-color: var(--parch);
      border-color: rgba(222,207,181,.6);

      @apply sticky top-0 z-50 w-full backdrop-blur-sm
             bg-opacity-80 border-b shadow-sm;
    }
    .nav-container{
      @apply max-w-6xl mx-auto px-6 py-3 flex items-center justify-between;
    }

    /* ------------------------------------------------------------
       Logo
    ------------------------------------------------------------ */
    .logo{
      font-family:"Playfair Display",serif;
      @apply text-xl md:text-2xl font-bold text-[var(--ink)] tracking-tight;
    }

    /* ------------------------------------------------------------
       Desktop links
    ------------------------------------------------------------ */
    .links{ @apply hidden gap-8 items-center; }
    .nav-link{
      @apply relative text-sm font-medium text-[var(--ink)] transition-colors;
    }
    .nav-link::after{
      content:"";position:absolute;left:0;bottom:-2px;width:0;height:2px;
      background:linear-gradient(90deg,var(--gold),var(--ink));
      transition:width .35s cubic-bezier(.4,0,.2,1);
    }
    .nav-link:hover::after{ width:100%; }
    .list-active{ color:var(--gold); }

    /* ------------------------------------------------------------
       Hamburger icon
    ------------------------------------------------------------ */
    .hamburger{ @apply flex flex-col justify-between w-6 h-5 relative; }
    .hamburger span{
      @apply block h-[3px] w-full bg-[var(--ink)] rounded transition-transform;
    }
    .hamburger.open span:nth-child(1){ @apply translate-y-[6px] rotate-45 bg-[var(--gold)]; }
    .hamburger.open span:nth-child(2){ @apply opacity-0; }
    .hamburger.open span:nth-child(3){ @apply -translate-y-[6px] -rotate-45 bg-[var(--gold)]; }

    /* ------------------------------------------------------------
       Mobile drop-down
    ------------------------------------------------------------ */
    .mobile-menu{
  background-color: var(--parch);

  @apply md:hidden flex flex-col gap-4 px-6 pb-6 pt-3
         bg-opacity-95 max-h-0 overflow-hidden
         transition-all duration-300 ease-linear;
  /* Only animate max-height */
  transition-property: max-height;
}
.mobile-menu.open{ max-height:260px; }    /* enough for 4 links */
  </style>

  <!-- ——— SCRIPT ——— -->
  <script is:inline>
    const burger = document.getElementById('hamburger');
    const menu   = document.getElementById('mobile-menu');

    burger?.addEventListener('click', () => {
      burger.classList.toggle('open');
      menu.classList.toggle('open');
    });

    /* Close menu after a link is clicked on mobile */
    menu?.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => {
        burger.classList.remove('open');
        menu.classList.remove('open');
      });
    });
  </script>
</nav>
