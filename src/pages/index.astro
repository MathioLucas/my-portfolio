---
// src/pages/index.astro
import BaseLayout from "../layouts/BaseLayout.astro";
---

<!-- ðŸ‘‡  Needed only once.  three.js must be loaded BEFORE vanta. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js" defer></script>

<style is:global>
/* --------  GENERAL  -------- */
html {scroll-behavior:smooth;}
.section          { @apply relative min-h-screen flex flex-col items-center justify-center px-6 md:px-10; }
.glass            { @apply bg-white/10 backdrop-blur-md border border-white/20 rounded-xl shadow-lg; }

/* --------  HERO TEXT  -------- */
.hero-title { @apply text-5xl md:text-7xl font-extrabold leading-none tracking-tight text-center text-white drop-shadow-lg; }
.hero-span  { @apply text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-sky-400 to-fuchsia-500; }

/* --------  SCROLL CUE  -------- */
@keyframes bounceY {0%,100%{transform:translateY(0)}50%{transform:translateY(12px)}}
.scroll-cue{animation:bounceY 2s infinite ease-in-out}

/* --------  CARDS  -------- */
.card   { @apply glass p-6 md:p-8 max-w-sm transition-transform duration-300 hover:-translate-y-2 hover:shadow-xl; }
.card h3{ @apply text-xl font-semibold mb-3 text-white; }
.card p { @apply text-sm leading-relaxed text-slate-200/90; }

/* --------  REVEAL ON SCROLL  -------- */
.reveal {opacity:0; transform:translateY(40px); transition:opacity .7s ease-out,transform .7s ease-out;}
.reveal.show {opacity:1; transform:none;}
</style>

<BaseLayout>
  <!-- === HERO =================================================== -->
  <section id="hero" class="section overflow-hidden">
    <!-- WebGL/Vanta canvas placeholder -->
    <div id="vanta-bg" class="absolute inset-0 -z-10"></div>

    <h1 class="hero-title mb-6">
      Hi, Iâ€™m <span class="hero-span">Mathio&nbsp;Luca</span>
    </h1>
    <p class="text-lg md:text-2xl text-slate-100 max-w-2xl text-center mb-12">
      I craft immersive, high-performance web experiences that turn bold ideas
      into elegant, revenue-driving products.
    </p>

    <a href="#stack" class="scroll-cue">
      <svg class="w-8 h-8 text-white/80" fill="none" stroke="currentColor"
           viewBox="0 0 24 24" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M19 9l-7 7-7-7"/>
      </svg>
    </a>
  </section>

  <!-- === TECH STACK ============================================= -->
  <section id="stack" class="section py-32 space-y-20">
    <h2 class="text-3xl md:text-4xl font-bold text-white text-center">
      Tech&nbsp;Stack
    </h2>

    <div class="grid gap-10 md:gap-12 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
      <div class="card reveal">
        <h3>Frontend</h3>
        <p>TypeScript, React / Next.js, Astro, Tailwind&nbsp;CSS, GSAP
           animations, accessibility-first design.</p>
      </div>

      <div class="card reveal">
        <h3>Backend&nbsp;&amp; Infra</h3>
        <p>Node.js, GraphQL, Serverless (AWS&nbsp;Lambda, Vercel), PostgreSQL &
           Prisma, Redis, RESTful APIs, Docker.</p>
      </div>

      <div class="card reveal">
        <h3>Workflow</h3>
        <p>GitHub Actions CI/CD, Playwright & Vitest, Storybook,
           Agile/UX-driven delivery, rapid prototyping.</p>
      </div>
    </div>
  </section>

  <!-- === CTA ==================================================== -->
  <section class="section py-32">
    <div class="glass p-10 md:p-16 text-center space-y-8 max-w-2xl">
      <h2 class="text-3xl md:text-4xl font-bold text-white">
        Ready to build something remarkable?
      </h2>
      <div class="flex flex-wrap justify-center gap-6">
        <a href="/contact"
           class="px-7 py-3 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-gray-900 font-semibold shadow-lg">
          Get in Touch
        </a>
        <a href="/projects"
           class="px-7 py-3 rounded-lg border border-white/40 hover:bg-white/10 text-white font-semibold">
          View Projects
        </a>
      </div>
    </div>
  </section>

  <!-- === MINI FOOTER ============================================ -->
  <footer class="py-10 text-center text-slate-300 text-sm">
    Â© {new Date().getFullYear()} Mathio&nbsp;Luca â€” Built with Astro&nbsp;â˜…
  </footer>

  <!-- ----------  Page-specific JS  ---------- -->
  <script is:inline>
    // 1) VANTA background
    window.addEventListener('DOMContentLoaded', () => {
      VANTA.NET({
        el: "#vanta-bg",
        color: 0x14b8a6,
        backgroundColor: 0x000000,
        points: 12.00,
        maxDistance: 20.00,
        spacing: 15.00,
        mouseControls: true,
        touchControls: true,
        minHeight: 200.00,
        minWidth: 200.00
      });
    });

    // 2) Reveal-on-scroll (IntersectionObserver)
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(e => e.isIntersecting && e.target.classList.add('show'));
    }, { threshold: 0.2 });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
  </script>
</BaseLayout>
